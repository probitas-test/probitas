export const snapshot = {};

snapshot[`after onRunStart 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (3) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (3) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (3) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (3) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onRunEnd 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"runEnd","summary":{"total":3,"passed":3,"failed":0,"duration":45,"scenarios":[{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}]}}
'
`;

snapshot[`after onRunStart 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Scenario with failing step (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (2-1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (2-1) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that fails (2-2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepError - Step that fails (2-2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
'
`;

snapshot[`after onScenarioEnd - Scenario with failing step (2) 1`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (3) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (3) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (3) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (3) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onRunEnd 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:552:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"runEnd","summary":{"total":3,"passed":2,"failed":1,"duration":35,"scenarios":[{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}]}}
'
`;

snapshot[`after onRunStart 3`] = `
'{"type":"runStart","scenarios":[]}
'
`;

snapshot[`after onRunEnd 3`] = `
'{"type":"runStart","scenarios":[]}
{"type":"runEnd","summary":{"total":0,"passed":0,"failed":0,"duration":0,"scenarios":[]}}
'
`;

snapshot[`after onRunStart 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (1) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (1) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (1) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (1) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (3) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (3) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (3) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (3) 3`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onRunEnd 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"runEnd","summary":{"total":3,"passed":3,"failed":0,"duration":45,"scenarios":[{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}]}}
'
`;

snapshot[`after onRunStart 5`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (1) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (1) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (1) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (1) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onScenarioStart - Scenario with failing step (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (2-1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (2-1) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that fails (2-2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepError - Step that fails (2-2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
'
`;

snapshot[`after onScenarioEnd - Scenario with failing step (2) 2`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
'
`;

snapshot[`after onScenarioStart - Simple passing scenario (3) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepStart - Step that passes (3) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onStepEnd - Step that passes (3) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
'
`;

snapshot[`after onScenarioEnd - Simple passing scenario (3) 4`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
'
`;

snapshot[`after onRunEnd 5`] = `
'{"type":"runStart","scenarios":[{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}]}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"scenarioStart","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepError","step":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"error":{"message":"Assertion failed","stack":"Error: Assertion failed\\\\n    at Object.<anonymous> (<file>:789:11)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:429:7)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async TestSuiteInternal.runTest (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:417:9)\\\\n    at async fn (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:378:13)\\\\n    at async innerWrapped (ext:cli/40_test.js:181:5)\\\\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\\\\n    at async Object.outerWrapped [as fn] (ext:cli/40_test.js:124:14)\\\\n    at async TestContext.step (ext:cli/40_test.js:511:22)\\\\n    at async TestSuiteInternal.run (https://jsr.io/@std/testing/1.0.16/_test_suite.ts:394:7)"}}
{"type":"scenarioEnd","scenario":{"name":"Scenario with failing step","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}},{"kind":"step","value":{"name":"Step that fails","location":{"file":"test.scenario.ts","line":20},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}}}
{"type":"scenarioStart","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepStart","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"stepEnd","step":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"result":{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},"scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]}}
{"type":"scenarioEnd","scenario":{"name":"Simple passing scenario","options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"location":{"file":"test.scenario.ts","line":10},"entries":[{"kind":"step","value":{"name":"Step that passes","location":{"file":"test.scenario.ts","line":15},"options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}}}]},"result":{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}}
{"type":"runEnd","summary":{"total":3,"passed":2,"failed":1,"duration":35,"scenarios":[{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]},{"metadata":{"name":"Scenario with failing step","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}},{"kind":"step","value":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}}}]},"status":"failed","duration":15,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10},{"metadata":{"name":"Step that fails","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":20}},"status":"failed","duration":5,"error":{}}],"error":{}},{"metadata":{"name":"Simple passing scenario","location":{"file":"test.scenario.ts","line":10},"options":{"tags":[],"stepOptions":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}}},"entries":[{"kind":"step","value":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}}}]},"status":"passed","duration":10,"steps":[{"metadata":{"name":"Step that passes","options":{"timeout":5000,"retry":{"maxAttempts":1,"backoff":"linear"}},"location":{"file":"test.scenario.ts","line":15}},"status":"passed","duration":10}]}]}}
'
`;

snapshot[`after onRunStart 6`] = `
'{"type":"runStart","scenarios":[]}
'
`;

snapshot[`after onRunEnd 6`] = `
'{"type":"runStart","scenarios":[]}
{"type":"runEnd","summary":{"total":0,"passed":0,"failed":0,"duration":0,"scenarios":[]}}
'
`;
